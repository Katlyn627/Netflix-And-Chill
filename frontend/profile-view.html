<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Profile - Netflix and Chill</title>
    <link rel="icon" type="image/x-icon" href="assets/images/favicon.ico">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#E50914">
    <link rel="stylesheet" href="src/styles/main.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="nav-icons">
                <a href="homepage.html" class="nav-icon-btn home" title="Home">üè†</a>
                <a href="matches.html" class="nav-icon-btn matches" title="Matches">‚ù§Ô∏è</a>
                <a href="profile-view.html" class="nav-icon-btn profile" id="profile-nav-btn" title="My Profile">
                    <span id="profile-nav-icon">üë§</span>
                </a>
                <button class="nav-icon-btn logout" id="logout-btn" title="Logout" aria-label="Logout">üö™‚û°Ô∏è</button>
            </div>
            <div class="logo-banner">
                <h1>NETFLIX & CHILL</h1>
            </div>
            <p class="tagline">Your Profile</p>
        </header>

        <main>
            <!-- Profile Header Section -->
            <section id="profile-header" class="card">
                <div style="display: flex; align-items: start; gap: 20px;">
                    <div id="profile-photo-container" style="flex-shrink: 0;">
                        <img id="profile-picture" src="" alt="Profile" style="width: 150px; height: 150px; border-radius: 10px; object-fit: cover; display: none;">
                        <div id="no-photo" style="width: 150px; height: 150px; border-radius: 10px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; font-size: 48px; color: white;">
                            üë§
                        </div>
                    </div>
                    <div style="flex-grow: 1;">
                        <h2 id="profile-username" style="margin-top: 0;">Username</h2>
                        <p id="profile-details"><strong>Age:</strong> <span id="profile-age"></span> | <strong>Location:</strong> <span id="profile-location"></span></p>
                        <p id="profile-gender-orientation"><strong>Gender:</strong> <span id="profile-gender"></span> | <strong>Sexual Orientation:</strong> <span id="profile-sexual-orientation"></span></p>
                        <p id="profile-bio" style="font-style: italic;"></p>
                    </div>
                </div>
            </section>

            <!-- Photo Gallery Section -->
            <section id="photo-gallery-section" class="card">
                <h2>Photo Gallery <span id="photo-count">(0/6)</span></h2>
                <div id="photo-gallery" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 10px; margin-bottom: 15px;">
                    <!-- Photos will be inserted here -->
                </div>
                <div id="add-photo-form" style="display: none;">
                    <div class="form-group">
                        <label for="photo-url">Photo URL:</label>
                        <input type="text" id="photo-url" placeholder="Enter image URL or upload a file">
                    </div>
                    <div class="form-group">
                        <label for="photo-file">Or Upload from Device/Camera:</label>
                        <input type="file" id="photo-file" accept="image/jpeg,image/jpg,image/png,image/gif,image/webp" capture="environment" style="padding: 8px;">
                        <p class="input-hint" style="margin-top: 5px; font-size: 0.9em; color: #666;">Accepted formats: JPEG, PNG, GIF, WebP (max 5MB). On mobile, you can take a photo directly.</p>
                    </div>
                    <button id="add-photo-btn" class="btn btn-primary">Add Photo</button>
                    <button id="cancel-add-photo-btn" class="btn btn-secondary">Cancel</button>
                </div>
                <button id="show-add-photo-btn" class="btn btn-secondary">+ Add Photo</button>
            </section>

            <!-- Account Settings Section -->
            <section id="account-settings-section" class="card">
                <h2>Account Settings</h2>
                
                <div class="form-group">
                    <label><strong>Email:</strong></label>
                    <div id="user-email"></div>
                </div>

                <div class="form-group" style="margin-top: 20px;">
                    <button id="change-password-btn" class="btn btn-primary">Change Password</button>
                </div>

                <div class="form-group" style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #ddd;">
                    <h3 style="color: #dc3545; margin-bottom: 10px;">Danger Zone</h3>
                    <p style="margin-bottom: 15px; color: #666;">Once you delete your profile, there is no going back. All your data including watch history, matches, and preferences will be permanently removed.</p>
                    <button id="delete-profile-btn" class="btn btn-danger">Delete Profile</button>
                </div>
            </section>

            <!-- Extended Profile Details Section -->
            <section id="extended-details-section" class="card">
                <h2>Extended Profile</h2>
                
                <div class="form-group">
                    <label><strong>Least Favorite Movies:</strong></label>
                    <div id="least-favorite-movies-list" style="margin-bottom: 10px;">
                        <em id="no-least-favorites">No least favorite movies added yet.</em>
                    </div>
                </div>

                <div class="form-group">
                    <label><strong>Movie Debate Topics:</strong></label>
                    <div id="debate-topics-list" style="margin-bottom: 10px;">
                        <em id="no-debate-topics">No debate topics added yet.</em>
                    </div>
                </div>

                <div class="form-group">
                    <label><strong>Favorite Movie Snacks:</strong></label>
                    <div id="favorite-snacks-list" style="margin-bottom: 10px;">
                        <em id="no-snacks">No favorite snacks added yet.</em>
                    </div>
                </div>

                <div class="form-group">
                    <label><strong>Video Chat Preference:</strong></label>
                    <div id="video-chat-pref">
                        <em id="no-video-pref">Not set</em>
                    </div>
                </div>

                <button id="edit-extended-profile-btn" class="btn btn-primary" style="margin-top: 15px;">Edit Extended Profile</button>
            </section>

            <!-- Quiz/Survey Section -->
            <section id="quiz-section" class="card">
                <h2>Compatibility Quiz</h2>
                <p>Answer these questions to improve your matches!</p>
                
                <div id="quiz-responses" style="margin-bottom: 15px;">
                    <em id="no-quiz-responses">No quiz responses yet.</em>
                </div>

                <button id="take-quiz-btn" class="btn btn-primary">Take Quiz</button>
            </section>

            <!-- Streaming Services Section -->
            <section id="streaming-section" class="card">
                <h2>Connected Streaming Services</h2>
                <div id="services-list">
                    <em id="no-services">No streaming services connected yet.</em>
                </div>
            </section>

            <!-- Watch History Section -->
            <section id="watch-history-section" class="card">
                <h2>Watch History</h2>
                <div id="watch-history-list">
                    <em id="no-watch-history">No watch history yet.</em>
                </div>
                <button id="add-watch-history-btn" class="btn btn-primary" style="margin-top: 15px;">+ Add to Watch History</button>
            </section>

            <!-- Favorite Movies Section -->
            <section id="favorite-movies-section" class="card">
                <h2>Favorite Movies</h2>
                <p style="color: #888; font-size: 0.9em;">Adding favorite movies helps improve your match compatibility!</p>
                <div id="favorite-movies-list" style="margin-bottom: 15px;">
                    <em id="no-favorite-movies">No favorite movies added yet.</em>
                </div>
                <button id="add-favorite-movie-btn" class="btn btn-primary">+ Add Favorite Movie</button>
            </section>

            <!-- Preferences Section -->
            <section id="preferences-section" class="card">
                <h2>Viewing Preferences</h2>
                <div id="preferences-display">
                    <div class="form-group">
                        <label><strong>Favorite Genres:</strong></label>
                        <div id="genres-list">
                            <em id="no-genres">No genres selected.</em>
                        </div>
                    </div>
                    <div class="form-group">
                        <label><strong>Binge-Watch Count:</strong></label>
                        <div id="binge-count-display">
                            <em id="no-binge-count">Not set</em>
                        </div>
                    </div>
                </div>
                <button id="edit-preferences-btn" class="btn btn-primary" style="margin-top: 15px;">Edit Preferences</button>
            </section>

            <!-- Add Favorite Movie Modal -->
            <div id="add-favorite-movie-modal" class="modal" style="display: none;">
                <div class="modal-content">
                    <h2>Add Favorite Movie</h2>
                    <form id="add-favorite-movie-form">
                        <div class="form-group">
                            <label for="movie-search">Search for a Movie:</label>
                            <input type="text" id="movie-search" placeholder="Start typing to search..." autocomplete="off">
                            <div id="movie-search-results" class="search-results" style="display: none;"></div>
                        </div>
                        <div id="selected-movie-display" style="display: none; margin-top: 15px;">
                            <h3>Selected Movie:</h3>
                            <div id="selected-movie-details" style="background: #f5f5f5; padding: 15px; border-radius: 5px;">
                                <img id="selected-movie-poster" src="" alt="Movie poster" style="width: 100px; height: 150px; object-fit: cover; border-radius: 5px; float: left; margin-right: 15px;">
                                <h4 id="selected-movie-title" style="margin-top: 0;"></h4>
                                <p id="selected-movie-year" style="color: #666; margin: 5px 0;"></p>
                                <p id="selected-movie-overview" style="font-size: 0.9em; margin-top: 10px;"></p>
                                <div style="clear: both;"></div>
                            </div>
                        </div>
                        <button type="submit" id="confirm-add-movie-btn" class="btn btn-primary" style="margin-top: 15px;" disabled>Add to Favorites</button>
                        <button type="button" id="cancel-add-movie-btn" class="btn btn-secondary" style="margin-top: 15px;">Cancel</button>
                    </form>
                </div>
            </div>

            <!-- Add Watch History Modal -->
            <div id="add-watch-history-modal" class="modal" style="display: none;">
                <div class="modal-content">
                    <h2>Add to Watch History</h2>
                    <form id="add-watch-history-form">
                        <div class="form-group">
                            <label for="watch-history-search">Search for Movie/TV Show:</label>
                            <input type="text" id="watch-history-search" placeholder="Start typing to search..." autocomplete="off">
                            <div id="watch-history-search-results" class="search-results" style="display: none;"></div>
                        </div>
                        <div id="selected-watch-item-display" style="display: none; margin-top: 15px;">
                            <h3>Selected Item:</h3>
                            <div id="selected-watch-item-details" style="background: #f5f5f5; padding: 15px; border-radius: 5px;">
                                <img id="selected-watch-item-poster" src="" alt="Poster" style="width: 100px; height: 150px; object-fit: cover; border-radius: 5px; float: left; margin-right: 15px;">
                                <h4 id="selected-watch-item-title" style="margin-top: 0;"></h4>
                                <p id="selected-watch-item-type" style="color: #666; margin: 5px 0;"></p>
                                <p id="selected-watch-item-overview" style="font-size: 0.9em; margin-top: 10px;"></p>
                                <div style="clear: both;"></div>
                            </div>
                        </div>
                        <div class="form-group" id="watch-history-type-group" style="display: none;">
                            <label for="watch-history-type">Type:</label>
                            <select id="watch-history-type" required>
                                <option value="">Select type...</option>
                                <option value="movie">Movie</option>
                                <option value="tvshow">TV Show</option>
                                <option value="series">Series</option>
                            </select>
                        </div>
                        <div class="form-group" id="watch-history-genre-group" style="display: none;">
                            <label for="watch-history-genre">Genre (optional):</label>
                            <input type="text" id="watch-history-genre" placeholder="e.g., Action, Comedy, Drama">
                        </div>
                        <div class="form-group" id="watch-history-service-group" style="display: none;">
                            <label for="watch-history-service">Streaming Service (optional):</label>
                            <select id="watch-history-service">
                                <option value="">Select service...</option>
                                <option value="Netflix">Netflix</option>
                                <option value="Hulu">Hulu</option>
                                <option value="Disney+">Disney+</option>
                                <option value="Amazon Prime">Amazon Prime</option>
                                <option value="HBO Max">HBO Max</option>
                                <option value="Apple TV+">Apple TV+</option>
                            </select>
                        </div>
                        <div class="form-group" id="watch-history-episodes-group" style="display: none;">
                            <label for="watch-history-episodes">Episodes Watched (for TV shows):</label>
                            <input type="number" id="watch-history-episodes" min="1" value="1">
                        </div>
                        <button type="submit" id="confirm-add-watch-history-btn" class="btn btn-primary" style="margin-top: 15px;" disabled>Add to Watch History</button>
                        <button type="button" id="cancel-add-watch-history-btn" class="btn btn-secondary" style="margin-top: 15px;">Cancel</button>
                    </form>
                </div>
            </div>

            <!-- Edit Preferences Modal -->
            <div id="edit-preferences-modal" class="modal" style="display: none;">
                <div class="modal-content">
                    <h2>Edit Viewing Preferences</h2>
                    <form id="edit-preferences-form">
                        <div class="form-group">
                            <label>Favorite Genres (select multiple):</label>
                            <div class="genre-options">
                                <label><input type="checkbox" name="genre" value="Action"> Action</label>
                                <label><input type="checkbox" name="genre" value="Comedy"> Comedy</label>
                                <label><input type="checkbox" name="genre" value="Drama"> Drama</label>
                                <label><input type="checkbox" name="genre" value="Horror"> Horror</label>
                                <label><input type="checkbox" name="genre" value="Romance"> Romance</label>
                                <label><input type="checkbox" name="genre" value="Sci-Fi"> Sci-Fi</label>
                                <label><input type="checkbox" name="genre" value="Documentary"> Documentary</label>
                                <label><input type="checkbox" name="genre" value="Thriller"> Thriller</label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="edit-binge-count">How many episodes do you typically binge in one sitting?</label>
                            <input type="number" id="edit-binge-count" name="bingeCount" min="1" value="3">
                        </div>
                        <button type="submit" class="btn btn-primary">Save Preferences</button>
                        <button type="button" id="cancel-edit-preferences-btn" class="btn btn-secondary">Cancel</button>
                    </form>
                </div>
            </div>

            <!-- Edit Extended Profile Modal -->
            <div id="edit-extended-modal" class="modal" style="display: none;">
                <div class="modal-content">
                    <h2>Edit Extended Profile</h2>
                    <form id="extended-profile-form">
                        <div class="form-group">
                            <label for="least-favorite-input">Least Favorite Movies (comma-separated):</label>
                            <input type="text" id="least-favorite-input" placeholder="e.g., Movie 1, Movie 2, Movie 3">
                        </div>

                        <div class="form-group">
                            <label for="debate-topics-input">Movie Debate Topics (comma-separated):</label>
                            <input type="text" id="debate-topics-input" placeholder="e.g., Best superhero movie, Overrated classics">
                        </div>

                        <div class="form-group">
                            <label for="snacks-input">Favorite Movie Snacks (comma-separated):</label>
                            <input type="text" id="snacks-input" placeholder="e.g., Popcorn, Candy, Nachos">
                        </div>

                        <div class="form-group">
                            <label for="video-chat-select">Video Chat Preference:</label>
                            <select id="video-chat-select">
                                <option value="">Select preference...</option>
                                <option value="facetime">FaceTime</option>
                                <option value="zoom">Zoom</option>
                                <option value="either">Either</option>
                            </select>
                        </div>

                        <button type="submit" class="btn btn-primary">Save Changes</button>
                        <button type="button" id="cancel-extended-edit-btn" class="btn btn-secondary">Cancel</button>
                    </form>
                </div>
            </div>

            <!-- Quiz Modal -->
            <div id="quiz-modal" class="modal" style="display: none;">
                <div class="modal-content">
                    <h2>Compatibility Quiz</h2>
                    <p>Answer these questions to find better matches!</p>
                    <form id="quiz-form">
                        <div class="form-group">
                            <label>Do you prefer subtitles or dubbing for foreign films?</label>
                            <select name="q1">
                                <option value="">Select...</option>
                                <option value="subtitles">Subtitles</option>
                                <option value="dubbing">Dubbing</option>
                                <option value="no_preference">No preference</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>What's your ideal movie length?</label>
                            <select name="q2">
                                <option value="">Select...</option>
                                <option value="under_90">Under 90 minutes</option>
                                <option value="90_120">90-120 minutes</option>
                                <option value="over_120">Over 2 hours - the longer the better!</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>How do you feel about movie spoilers?</label>
                            <select name="q3">
                                <option value="">Select...</option>
                                <option value="hate">Absolutely hate them</option>
                                <option value="dont_mind">Don't mind them</option>
                                <option value="like">Actually prefer knowing what happens</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Would you rather watch a critically acclaimed film or a fun popcorn movie?</label>
                            <select name="q4">
                                <option value="">Select...</option>
                                <option value="acclaimed">Critically acclaimed</option>
                                <option value="popcorn">Fun popcorn movie</option>
                                <option value="both">Both are great!</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Do you talk during movies?</label>
                            <select name="q5">
                                <option value="">Select...</option>
                                <option value="never">Never - absolute silence</option>
                                <option value="sometimes">Sometimes - for commentary</option>
                                <option value="often">Often - I love discussing!</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>How many times will you rewatch your favorite movie?</label>
                            <select name="q6">
                                <option value="">Select...</option>
                                <option value="once">Once is enough</option>
                                <option value="few">A few times</option>
                                <option value="infinite">Infinite times!</option>
                            </select>
                        </div>

                        <button type="submit" class="btn btn-primary">Submit Answers</button>
                        <button type="button" id="cancel-quiz-btn" class="btn btn-secondary">Cancel</button>
                    </form>
                </div>
            </div>

            <!-- Change Password Modal -->
            <div id="change-password-modal" class="modal" style="display: none;">
                <div class="modal-content">
                    <h2>Change Password</h2>
                    <form id="change-password-form">
                        <div class="form-group">
                            <label for="current-password">Current Password:</label>
                            <div class="password-input-wrapper">
                                <input type="password" id="current-password" required>
                                <button type="button" class="toggle-password" data-target="current-password">Show</button>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="new-password">New Password:</label>
                            <div class="password-input-wrapper">
                                <input type="password" id="new-password" minlength="6" required>
                                <button type="button" class="toggle-password" data-target="new-password">Show</button>
                            </div>
                            <p class="input-hint" style="margin-top: 5px; font-size: 0.9em; color: #666;">Minimum 6 characters</p>
                        </div>

                        <div class="form-group">
                            <label for="confirm-password">Confirm New Password:</label>
                            <div class="password-input-wrapper">
                                <input type="password" id="confirm-password" minlength="6" required>
                                <button type="button" class="toggle-password" data-target="confirm-password">Show</button>
                            </div>
                        </div>

                        <button type="submit" class="btn btn-primary">Update Password</button>
                        <button type="button" id="cancel-password-change-btn" class="btn btn-secondary">Cancel</button>
                    </form>
                </div>
            </div>
        </main>

        <footer>
            <p>&copy; 2024 Netflix and Chill - Find your perfect streaming partner</p>
        </footer>
    </div>

    <script src="src/services/api.js"></script>
    <script src="src/utils/navigation.js"></script>
    <script src="src/components/profile-view.js"></script>
</body>
</html>
