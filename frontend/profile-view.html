<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Profile - Netflix and Chill</title>
    <link rel="icon" type="image/x-icon" href="assets/images/favicon.ico">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#E50914">
    <link rel="stylesheet" href="src/styles/main.css">
    <link rel="stylesheet" href="src/styles/bottom-nav.css">
    <link rel="stylesheet" href="src/styles/profile-bumble.css">
    <link rel="stylesheet" href="src/styles/analytics.css">
    <link rel="stylesheet" href="src/styles/profile-frames.css">
</head>
<body>
    <div class="container">
        <header class="profile-header-bumble">
            <div class="header-top">
                <h1>Profile</h1>
                <div class="settings-icons" style="display: flex; gap: 10px;">
                    <button class="icon-btn" id="help-btn" title="Help">
                        <span class="icon">‚ùì</span>
                    </button>
                    <button class="icon-btn" id="settings-btn" title="Settings">
                        <span class="icon">‚öôÔ∏è</span>
                    </button>
                </div>
            </div>
        </header>

        <main class="profile-content-bumble">
            <!-- Profile Hero Section (Bumble Style) -->
            <section class="profile-hero">
                <div class="profile-photo-circle">
                    <img id="profile-picture-hero" src="" alt="Profile" style="display: none;">
                    <div id="no-photo-hero" class="no-photo">
                        üë§
                    </div>
                </div>
                <div class="profile-name-section">
                    <h2>
                        <span id="profile-username-hero">Username</span>, 
                        <span id="profile-age-hero">28</span>
                        <span class="verification-badge" id="verification-badge" style="display: none;">‚úì</span>
                    </h2>
                </div>
                <button id="edit-profile-btn-hero" class="edit-profile-btn">Edit profile</button>
            </section>

            <!-- Premium Section (Bumble Style) -->
            <section class="premium-section" id="premium-section" style="display: none;">
                <div class="premium-badge">PREMIUM</div>
                <h3>Your Premium details</h3>
                <div class="premium-details">
                    <button class="subscription-details-btn" id="subscription-details-btn">Subscription details</button>
                    <ul class="premium-features-checklist">
                        <li>Unlimited likes</li>
                        <li>See who liked you</li>
                        <li>Advanced filters</li>
                    </ul>
                </div>
            </section>

            <!-- Original Profile Header Section (Hidden by default, shown for detailed editing) -->
            <section id="profile-header" class="card" style="display: none;">
                <div class="profile-header-container">
                    <div id="profile-photo-container">
                        <img id="profile-picture" src="" alt="Profile">
                        <div id="no-photo">
                            üë§
                        </div>
                    </div>
                    <div class="profile-info-container">
                        <h2 id="profile-username">Username</h2>
                        <p id="profile-details"><strong>Age:</strong> <span id="profile-age"></span> | <strong>Location:</strong> <span id="profile-location"></span></p>
                        <p id="profile-gender-orientation"><strong>Gender:</strong> <span id="profile-gender"></span> | <strong>Sexual Orientation:</strong> <span id="profile-sexual-orientation"></span></p>
                        <p id="profile-bio"></p>
                        <button id="edit-basic-info-btn" class="btn btn-secondary profile-action-btn">Edit Basic Info</button>
                        <button id="load-profile-view-btn" class="btn btn-primary profile-action-btn">Load Profile View</button>
                    </div>
                </div>
            </section>

            <!-- Photo Gallery Section -->
            <section id="photo-gallery-section" class="card">
                <h2>Photo Gallery <span id="photo-count">(0/6)</span></h2>
                <div id="photo-gallery" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 10px; margin-bottom: 15px;">
                    <!-- Photos will be inserted here -->
                </div>
                <div id="add-photo-form" style="display: none;">
                    <div class="form-group">
                        <label for="photo-url">Photo URL:</label>
                        <input type="text" id="photo-url" placeholder="Enter image URL or upload a file">
                    </div>
                    <div class="form-group">
                        <label for="photo-file">Or Upload from Device/Camera:</label>
                        <input type="file" id="photo-file" accept="image/jpeg,image/jpg,image/png,image/gif,image/webp" capture="environment" style="padding: 8px;">
                        <p class="input-hint" style="margin-top: 5px; font-size: 0.9em; color: #666;">Accepted formats: JPEG, PNG, GIF, WebP (max 5MB). On mobile, you can take a photo directly.</p>
                    </div>
                    <button id="add-photo-btn" class="btn btn-primary">Add Photo</button>
                    <button id="cancel-add-photo-btn" class="btn btn-secondary">Cancel</button>
                </div>
                <button id="show-add-photo-btn" class="btn btn-secondary">+ Add Photo</button>
            </section>

            <!-- Account Settings Section -->
            <section id="account-settings-section" class="card">
                <h2>Account Settings</h2>
                
                <div class="form-group">
                    <label><strong>Email:</strong></label>
                    <div id="user-email"></div>
                </div>

                <div class="form-group" style="margin-top: 20px;">
                    <button id="change-password-btn" class="btn btn-primary">Change Password</button>
                </div>

                <div class="form-group" style="margin-top: 20px;">
                    <button id="logout-btn" class="btn btn-secondary">Logout</button>
                </div>

                <div class="form-group" style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #ddd;">
                    <h3 style="color: #dc3545; margin-bottom: 10px;">Danger Zone</h3>
                    <p style="margin-bottom: 15px; color: #666;">Once you delete your profile, there is no going back. All your data including watch history, matches, and preferences will be permanently removed.</p>
                    <button id="delete-profile-btn" class="btn btn-danger">Delete Profile</button>
                </div>
            </section>

            <!-- Premium Profile Section -->
            <section id="premium-profile-section" class="card">
                <h2>Premium Profile</h2>
                
                <div class="premium-status-container">
                    <div id="premium-status-display" class="premium-status">
                        <div class="status-badge">
                            <span id="premium-badge" class="badge">Free</span>
                        </div>
                        <p id="premium-description">Upgrade to premium for advanced filter options and exclusive features.</p>
                        <p id="premium-since" style="display: none; font-size: 0.9em; color: #666; margin-top: 5px;">
                            <strong>Premium since:</strong> <span id="premium-date"></span>
                        </p>
                    </div>
                    
                    <div class="premium-features" id="premium-features-list" style="display: none; margin-top: 20px;">
                        <h3>Active Premium Features:</h3>
                        <ul id="features-list" style="list-style: none; padding-left: 0;">
                            <!-- Features will be dynamically added here -->
                        </ul>
                    </div>

                    <div class="premium-actions" style="margin-top: 20px;">
                        <button id="toggle-premium-btn" class="btn btn-primary">Activate Premium</button>
                        <p style="margin-top: 10px; font-size: 0.9em; color: #888;">
                            <em>Note: This is a demo feature. Premium features will be fully implemented in future updates.</em>
                        </p>
                    </div>

                    <div class="premium-info" style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                        <h3 style="margin-bottom: 10px;">Coming Soon: Premium Features</h3>
                        <ul style="margin-left: 20px;">
                            <li>Advanced match filters (genre preferences, viewing habits, etc.)</li>
                            <li>Unlimited swipes per day</li>
                            <li>See who liked you</li>
                            <li>Priority matching algorithm</li>
                            <li>Ad-free experience</li>
                            <li>Exclusive profile frames and badges</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Extended Profile Details Section -->
            <section id="extended-details-section" class="card">
                <h2>Extended Profile</h2>
                
                <div class="form-group">
                    <label><strong>Least Favorite Movies:</strong></label>
                    <div id="least-favorite-movies-list" style="margin-bottom: 10px;">
                        <em id="no-least-favorites">No least favorite movies added yet.</em>
                    </div>
                </div>

                <div class="form-group">
                    <label><strong>Movie Debate Topics:</strong></label>
                    <div id="debate-topics-list" style="margin-bottom: 10px;">
                        <em id="no-debate-topics">No debate topics added yet.</em>
                    </div>
                </div>

                <div class="form-group">
                    <label><strong>Favorite Movie Snacks:</strong></label>
                    <div id="favorite-snacks-list" style="margin-bottom: 10px;">
                        <em id="no-snacks">No favorite snacks added yet.</em>
                    </div>
                </div>

                <div class="form-group">
                    <label><strong>Video Chat Preference:</strong></label>
                    <div id="video-chat-pref">
                        <em id="no-video-pref">Not set</em>
                    </div>
                </div>

                <button id="edit-extended-profile-btn" class="btn btn-primary" style="margin-top: 15px;">Edit Extended Profile</button>
            </section>

            <!-- Quiz/Survey Section -->
            <section id="quiz-section" class="card">
                <h2>Compatibility Quiz</h2>
                <p>Answer these questions to improve your matches!</p>
                
                <div id="quiz-responses" style="margin-bottom: 15px;">
                    <em id="no-quiz-responses">No quiz responses yet.</em>
                </div>

                <button id="take-quiz-btn" class="btn btn-primary">Take/Update Quiz</button>
            </section>

            <!-- Swipe Analytics Section -->
            <section id="swipe-analytics-section" class="card">
                <h2>üé¨ Your Swipe Preferences</h2>
                <p>See what genres and content types you love based on your swipes!</p>
                
                <div id="compact-analytics-container">
                    <p style="text-align: center; color: #666;">Loading analytics...</p>
                </div>
            </section>

            <!-- Streaming Services Section -->
            <section id="streaming-section" class="card">
                <h2>Connected Streaming Services</h2>
                <div id="services-list">
                    <em id="no-services">No streaming services connected yet.</em>
                </div>
                <button id="update-streaming-services-btn" class="btn btn-primary" style="margin-top: 15px;">Update Streaming Services</button>
            </section>

            <!-- Watch History Section -->
            <section id="watch-history-section" class="card">
                <h2>Watch History</h2>
                <div id="watch-history-list">
                    <em id="no-watch-history">No watch history yet.</em>
                </div>
                <button id="add-watch-history-btn" class="btn btn-primary" style="margin-top: 15px;">+ Add to Watch History</button>
            </section>

            <!-- Favorite Movies Section -->
            <section id="favorite-movies-section" class="card">
                <h2>Favorite Movies</h2>
                <p style="color: #888; font-size: 0.9em;">Adding favorite movies helps improve your match compatibility!</p>
                <div id="favorite-movies-list" style="margin-bottom: 15px;">
                    <em id="no-favorite-movies">No favorite movies added yet.</em>
                </div>
                <button id="add-favorite-movie-btn" class="btn btn-primary">+ Add Favorite Movie</button>
            </section>

            <!-- Preferences Section -->
            <section id="preferences-section" class="card">
                <h2>Viewing Preferences</h2>
                <div id="preferences-display">
                    <div class="form-group">
                        <label><strong>Favorite Genres:</strong></label>
                        <div id="genres-list">
                            <em id="no-genres">No genres selected.</em>
                        </div>
                    </div>
                    <div class="form-group">
                        <label><strong>Binge-Watch Count:</strong></label>
                        <div id="binge-count-display">
                            <em id="no-binge-count">Not set</em>
                        </div>
                    </div>
                </div>
                <button id="edit-preferences-btn" class="btn btn-primary" style="margin-top: 15px;">Edit Preferences</button>
            </section>

            <!-- Add Favorite Movie Modal -->
            <div id="add-favorite-movie-modal" class="modal" style="display: none;">
                <div class="modal-content">
                    <h2>Add Favorite Movie</h2>
                    <form id="add-favorite-movie-form">
                        <div class="form-group">
                            <label for="movie-search">Search for a Movie:</label>
                            <input type="text" id="movie-search" placeholder="Start typing to search..." autocomplete="off">
                            <div id="movie-search-results" class="search-results" style="display: none;"></div>
                        </div>
                        <div id="selected-movie-display" style="display: none; margin-top: 15px;">
                            <h3>Selected Movie:</h3>
                            <div id="selected-movie-details" style="background: #f5f5f5; padding: 15px; border-radius: 5px;">
                                <img id="selected-movie-poster" src="" alt="Movie poster" style="width: 100px; height: 150px; object-fit: cover; border-radius: 5px; float: left; margin-right: 15px;">
                                <h4 id="selected-movie-title" style="margin-top: 0;"></h4>
                                <p id="selected-movie-year" style="color: #666; margin: 5px 0;"></p>
                                <p id="selected-movie-overview" style="font-size: 0.9em; margin-top: 10px;"></p>
                                <div style="clear: both;"></div>
                            </div>
                        </div>
                        <button type="submit" id="confirm-add-movie-btn" class="btn btn-primary" style="margin-top: 15px;" disabled>Add to Favorites</button>
                        <button type="button" id="cancel-add-movie-btn" class="btn btn-secondary" style="margin-top: 15px;">Cancel</button>
                    </form>
                </div>
            </div>

            <!-- Add Watch History Modal -->
            <div id="add-watch-history-modal" class="modal" style="display: none;">
                <div class="modal-content">
                    <h2>Add to Watch History</h2>
                    <form id="add-watch-history-form">
                        <div class="form-group">
                            <label for="watch-history-search">Search for Movie/TV Show:</label>
                            <input type="text" id="watch-history-search" placeholder="Start typing to search..." autocomplete="off">
                            <div id="watch-history-search-results" class="search-results" style="display: none;"></div>
                        </div>
                        <div id="selected-watch-item-display" style="display: none; margin-top: 15px;">
                            <h3>Selected Item:</h3>
                            <div id="selected-watch-item-details" style="background: #f5f5f5; padding: 15px; border-radius: 5px;">
                                <img id="selected-watch-item-poster" src="" alt="Poster" style="width: 100px; height: 150px; object-fit: cover; border-radius: 5px; float: left; margin-right: 15px;">
                                <h4 id="selected-watch-item-title" style="margin-top: 0;"></h4>
                                <p id="selected-watch-item-type" style="color: #666; margin: 5px 0;"></p>
                                <p id="selected-watch-item-overview" style="font-size: 0.9em; margin-top: 10px;"></p>
                                <div style="clear: both;"></div>
                            </div>
                        </div>
                        <div class="form-group" id="watch-history-type-group" style="display: none;">
                            <label for="watch-history-type">Type:</label>
                            <select id="watch-history-type" required>
                                <option value="">Select type...</option>
                                <option value="movie">Movie</option>
                                <option value="tvshow">TV Show</option>
                                <option value="series">Series</option>
                            </select>
                        </div>
                        <div class="form-group" id="watch-history-genre-group" style="display: none;">
                            <label for="watch-history-genre">Genre (optional):</label>
                            <input type="text" id="watch-history-genre" placeholder="e.g., Action, Comedy, Drama">
                        </div>
                        <div class="form-group" id="watch-history-service-group" style="display: none;">
                            <label for="watch-history-service">Streaming Service (optional):</label>
                            <select id="watch-history-service">
                                <option value="">Select service...</option>
                                <option value="Netflix">Netflix</option>
                                <option value="Amazon Prime Video">Amazon Prime Video</option>
                                <option value="Disney+">Disney+</option>
                                <option value="Hulu">Hulu</option>
                                <option value="HBO Max">HBO Max</option>
                                <option value="Apple TV+">Apple TV+</option>
                                <option value="Peacock">Peacock</option>
                                <option value="Paramount+">Paramount+</option>
                                <option value="Max">Max</option>
                                <option value="Showtime">Showtime</option>
                                <option value="Starz">Starz</option>
                                <option value="Crunchyroll">Crunchyroll</option>
                            </select>
                        </div>
                        <div class="form-group" id="watch-history-episodes-group" style="display: none;">
                            <label for="watch-history-episodes">Episodes Watched (for TV shows):</label>
                            <input type="number" id="watch-history-episodes" min="1" value="1">
                        </div>
                        <button type="submit" id="confirm-add-watch-history-btn" class="btn btn-primary" style="margin-top: 15px;" disabled>Add to Watch History</button>
                        <button type="button" id="cancel-add-watch-history-btn" class="btn btn-secondary" style="margin-top: 15px;">Cancel</button>
                    </form>
                </div>
            </div>

            <!-- Update Streaming Services Modal -->
            <div id="update-streaming-services-modal" class="modal" style="display: none;">
                <div class="modal-content">
                    <h2>Update Streaming Services</h2>
                    <p style="color: #888; margin-bottom: 15px;">Select from the top 25 streaming services in the USA (sorted alphabetically)</p>
                    <form id="update-streaming-services-form">
                        <div id="streaming-services-list" class="services-grid">
                            <!-- Services will be dynamically loaded from TMDB API -->
                        </div>
                        <button type="submit" class="btn btn-primary" style="margin-top: 15px;">Save Changes</button>
                        <button type="button" id="cancel-update-streaming-btn" class="btn btn-secondary" style="margin-top: 15px;">Cancel</button>
                    </form>
                </div>
            </div>

            <!-- Edit Preferences Modal -->
            <div id="edit-preferences-modal" class="modal" style="display: none;">
                <div class="modal-content">
                    <h2>Edit Viewing Preferences</h2>
                    <form id="edit-preferences-form">
                        <div class="form-group">
                            <label>Favorite Genres (select multiple):</label>
                            <div class="genre-options">
                                <label><input type="checkbox" name="genre" value="Action"> Action</label>
                                <label><input type="checkbox" name="genre" value="Comedy"> Comedy</label>
                                <label><input type="checkbox" name="genre" value="Drama"> Drama</label>
                                <label><input type="checkbox" name="genre" value="Horror"> Horror</label>
                                <label><input type="checkbox" name="genre" value="Romance"> Romance</label>
                                <label><input type="checkbox" name="genre" value="Sci-Fi"> Sci-Fi</label>
                                <label><input type="checkbox" name="genre" value="Documentary"> Documentary</label>
                                <label><input type="checkbox" name="genre" value="Thriller"> Thriller</label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="edit-binge-count">How many episodes do you typically binge in one sitting?</label>
                            <input type="number" id="edit-binge-count" name="bingeCount" min="1" value="3">
                        </div>
                        <button type="submit" class="btn btn-primary">Save Preferences</button>
                        <button type="button" id="cancel-edit-preferences-btn" class="btn btn-secondary">Cancel</button>
                    </form>
                </div>
            </div>

            <!-- Edit Extended Profile Modal -->
            <div id="edit-extended-modal" class="modal" style="display: none;">
                <div class="modal-content">
                    <h2>Edit Extended Profile</h2>
                    <form id="extended-profile-form">
                        <div class="form-group">
                            <label for="least-favorite-input">Least Favorite Movies (comma-separated):</label>
                            <input type="text" id="least-favorite-input" placeholder="e.g., Movie 1, Movie 2, Movie 3">
                        </div>

                        <div class="form-group">
                            <label for="debate-topics-input">Movie Debate Topics (comma-separated):</label>
                            <input type="text" id="debate-topics-input" placeholder="e.g., Best superhero movie, Overrated classics">
                        </div>

                        <div class="form-group">
                            <label for="snacks-input">Favorite Movie Snacks (comma-separated):</label>
                            <input type="text" id="snacks-input" placeholder="e.g., Popcorn, Candy, Nachos">
                        </div>

                        <div class="form-group">
                            <label for="video-chat-select">Video Chat Preference:</label>
                            <select id="video-chat-select">
                                <option value="">Select preference...</option>
                                <option value="facetime">FaceTime</option>
                                <option value="zoom">Zoom</option>
                                <option value="either">Either</option>
                            </select>
                        </div>

                        <button type="submit" class="btn btn-primary">Save Changes</button>
                        <button type="button" id="cancel-extended-edit-btn" class="btn btn-secondary">Cancel</button>
                    </form>
                </div>
            </div>

            <!-- Quiz Modal -->
            <div id="quiz-modal" class="modal" style="display: none;">
                <div class="modal-content" style="max-height: 80vh; overflow-y: auto;">
                    <h2>Compatibility Quiz (50 Questions)</h2>
                    <p>Answer all questions to find your best matches!</p>
                    <div id="quiz-progress" style="margin: 15px 0;">
                        <div style="background: #e0e0e0; height: 10px; border-radius: 5px; overflow: hidden;">
                            <div id="quiz-progress-bar" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); height: 100%; width: 0%; transition: width 0.3s;"></div>
                        </div>
                        <p id="quiz-progress-text" style="text-align: center; margin-top: 5px; font-size: 0.9em; color: #666;">0 of 50 questions answered</p>
                    </div>
                    <form id="quiz-form">
                        <div id="quiz-questions-container">
                            <!-- Questions will be dynamically loaded here by quiz.js -->
                        </div>

                        <button type="submit" id="submit-quiz-btn" class="btn btn-primary" disabled>Complete Quiz (50 remaining)</button>
                        <button type="button" id="cancel-quiz-btn" class="btn btn-secondary">Cancel</button>
                    </form>
                </div>
            </div>

            <!-- Change Password Modal -->
            <div id="change-password-modal" class="modal" style="display: none;">
                <div class="modal-content">
                    <h2>Change Password</h2>
                    <form id="change-password-form">
                        <div class="form-group">
                            <label for="current-password">Current Password:</label>
                            <div class="password-input-wrapper">
                                <input type="password" id="current-password" required>
                                <button type="button" class="toggle-password" data-target="current-password">Show</button>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="new-password">New Password:</label>
                            <div class="password-input-wrapper">
                                <input type="password" id="new-password" minlength="6" required>
                                <button type="button" class="toggle-password" data-target="new-password">Show</button>
                            </div>
                            <p class="input-hint" style="margin-top: 5px; font-size: 0.9em; color: #666;">Minimum 6 characters</p>
                        </div>

                        <div class="form-group">
                            <label for="confirm-password">Confirm New Password:</label>
                            <div class="password-input-wrapper">
                                <input type="password" id="confirm-password" minlength="6" required>
                                <button type="button" class="toggle-password" data-target="confirm-password">Show</button>
                            </div>
                        </div>

                        <button type="submit" class="btn btn-primary">Update Password</button>
                        <button type="button" id="cancel-password-change-btn" class="btn btn-secondary">Cancel</button>
                    </form>
                </div>
            </div>

            <!-- Edit Basic Info Modal -->
            <div id="edit-basic-info-modal" class="modal" style="display: none;">
                <div class="modal-content">
                    <h2>Edit Basic Information</h2>
                    <form id="edit-basic-info-form">
                        <div class="form-group">
                            <label for="edit-age">Age:</label>
                            <input type="number" id="edit-age" min="18" max="120" required>
                        </div>

                        <div class="form-group">
                            <label for="edit-location">Location:</label>
                            <input type="text" id="edit-location" placeholder="City, State" required>
                        </div>

                        <div class="form-group">
                            <label for="edit-gender">Gender:</label>
                            <select id="edit-gender">
                                <option value="">Select...</option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                                <option value="non-binary">Non-binary</option>
                                <option value="other">Other</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="edit-sexual-orientation">Sexual Orientation:</label>
                            <select id="edit-sexual-orientation">
                                <option value="">Select...</option>
                                <option value="straight">Straight</option>
                                <option value="gay">Gay</option>
                                <option value="lesbian">Lesbian</option>
                                <option value="bisexual">Bisexual</option>
                                <option value="pansexual">Pansexual</option>
                                <option value="asexual">Asexual</option>
                                <option value="other">Other</option>
                            </select>
                        </div>

                        <button type="submit" class="btn btn-primary">Save Changes</button>
                        <button type="button" id="cancel-basic-info-edit-btn" class="btn btn-secondary">Cancel</button>
                    </form>
                </div>
            </div>

            <!-- Profile View Popup Modal -->
            <div id="profile-view-popup" class="modal" style="display: none;">
                <div class="modal-content" style="max-width: 800px; max-height: 90vh;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2 style="margin: 0;">Complete Profile View</h2>
                        <button id="close-profile-popup-btn" class="btn btn-secondary" style="padding: 8px 15px;">Close</button>
                    </div>
                    
                    <!-- Basic Information Section -->
                    <div style="margin-bottom: 25px;">
                        <h3 style="color: #E50914; margin-bottom: 15px; font-size: 1.3em; border-bottom: 2px solid #E50914; padding-bottom: 5px;">üìã Basic Information</h3>
                        <div style="display: flex; align-items: start; gap: 20px; margin-bottom: 15px;">
                            <div id="popup-profile-photo-container" style="flex-shrink: 0;">
                                <img id="popup-profile-picture" src="" alt="Profile" style="width: 120px; height: 120px; border-radius: 10px; object-fit: cover; display: none;">
                                <div id="popup-no-photo" style="width: 120px; height: 120px; border-radius: 10px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; font-size: 40px; color: white;">
                                    üë§
                                </div>
                            </div>
                            <div style="flex-grow: 1;">
                                <h3 id="popup-profile-username" style="margin-top: 0; font-size: 1.5em;">Username</h3>
                                <p><strong>Age:</strong> <span id="popup-profile-age"></span></p>
                                <p><strong>Location:</strong> <span id="popup-profile-location"></span></p>
                                <p><strong>Gender:</strong> <span id="popup-profile-gender"></span></p>
                                <p><strong>Sexual Orientation:</strong> <span id="popup-profile-sexual-orientation"></span></p>
                                <p style="font-style: italic; margin-top: 10px; color: #666;"><strong>Bio:</strong> <span id="popup-profile-bio"></span></p>
                            </div>
                        </div>
                    </div>

                    <!-- Streaming Services Section -->
                    <div style="margin-bottom: 25px;">
                        <h3 style="color: #E50914; margin-bottom: 15px; font-size: 1.3em; border-bottom: 2px solid #E50914; padding-bottom: 5px;">üì∫ Streaming Services</h3>
                        <div id="popup-services-list">
                            <em>No streaming services connected.</em>
                        </div>
                    </div>

                    <!-- Shared Content Section -->
                    <div style="margin-bottom: 25px;">
                        <h3 style="color: #E50914; margin-bottom: 15px; font-size: 1.3em; border-bottom: 2px solid #E50914; padding-bottom: 5px;">üé¨ Shared Content</h3>
                        
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #333; margin-bottom: 10px;">Watch History</h4>
                            <div id="popup-watch-history-list">
                                <em>No watch history yet.</em>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #333; margin-bottom: 10px;">Favorite Movies</h4>
                            <div id="popup-favorite-movies-list">
                                <em>No favorite movies added yet.</em>
                            </div>
                        </div>
                    </div>

                    <!-- Movie Personality Section -->
                    <div style="margin-bottom: 25px;">
                        <h3 style="color: #E50914; margin-bottom: 15px; font-size: 1.3em; border-bottom: 2px solid #E50914; padding-bottom: 5px;">üé≠ Movie Personality</h3>
                        <div id="popup-movie-personality">
                            <em>No movie personality quiz taken yet.</em>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <p>&copy; 2024 Netflix and Chill - Find your perfect streaming partner</p>
        </footer>
    </div>

    <script src="src/utils/errorHandler.js"></script>
    <script src="src/utils/settings.js"></script>
    <script src="src/services/api.js"></script>
    
    <!-- Auth0 SPA SDK -->
    <script src="https://cdn.auth0.com/js/auth0-spa-js/2.0/auth0-spa-js.production.js"></script>
    
    <!-- Auth0 Configuration -->
    <script>
        // ‚ö†Ô∏è IMPORTANT: Replace these placeholder values with your actual Auth0 credentials
        // See FRONTEND_AUTH0_CONFIG.md for setup instructions
        // DO NOT commit actual credentials to public repositories
        window.AUTH0_DOMAIN = 'YOUR_AUTH0_DOMAIN.auth0.com';
        window.AUTH0_CLIENT_ID = 'YOUR_AUTH0_CLIENT_ID';
        window.AUTH0_AUDIENCE = 'https://YOUR_AUTH0_DOMAIN.auth0.com/api/v2/';
    </script>
    <script src="src/utils/auth0-config.js"></script>
    
    <script src="src/utils/navigation.js"></script>
    <script src="src/components/bottom-nav.js"></script>
    <script src="src/components/quiz.js"></script>
    <script src="src/components/swipeAnalytics.js"></script>
    <script src="src/components/profile-frame-selector.js"></script>
    <script src="src/components/profile-view.js"></script>
    <script>
        // Additional initialization for Bumble-style profile
        document.addEventListener('DOMContentLoaded', () => {
            // Sync profile data to hero section
            setTimeout(() => {
                const username = document.getElementById('profile-username')?.textContent;
                const age = document.getElementById('profile-age')?.textContent;
                const picture = document.getElementById('profile-picture')?.src;
                
                if (username) {
                    const usernameHero = document.getElementById('profile-username-hero');
                    if (usernameHero) usernameHero.textContent = username;
                }
                
                if (age) {
                    const ageHero = document.getElementById('profile-age-hero');
                    if (ageHero) ageHero.textContent = age;
                }
                
                if (picture && picture !== '') {
                    const pictureHero = document.getElementById('profile-picture-hero');
                    const noPhotoHero = document.getElementById('no-photo-hero');
                    if (pictureHero && noPhotoHero) {
                        pictureHero.src = picture;
                        pictureHero.style.display = 'block';
                        noPhotoHero.style.display = 'none';
                    }
                }

                // Check premium status and show/hide premium section
                const userId = localStorage.getItem('currentUserId');
                if (userId) {
                    fetch(`http://localhost:3000/api/users/${userId}`)
                        .then(res => res.json())
                        .then(user => {
                            const premiumSection = document.getElementById('premium-section');
                            if (premiumSection && user.isPremium) {
                                premiumSection.style.display = 'block';
                            }
                        })
                        .catch(err => console.error('Error loading user data:', err));
                }
            }, 500);

            // Edit profile button
            const editProfileBtn = document.getElementById('edit-profile-btn-hero');
            if (editProfileBtn) {
                editProfileBtn.addEventListener('click', () => {
                    // Show original profile header for editing
                    const profileHeader = document.getElementById('profile-header');
                    if (profileHeader) {
                        profileHeader.style.display = 'block';
                        profileHeader.scrollIntoView({ behavior: 'smooth' });
                    }
                });
            }

            // Help and Settings buttons
            const helpBtn = document.getElementById('help-btn');
            if (helpBtn) {
                helpBtn.addEventListener('click', () => {
                    alert('Help & Support\n\nFor help with your account, please visit our support center or contact support@netflixandchill.com');
                });
            }

            const settingsBtn = document.getElementById('settings-btn');
            if (settingsBtn) {
                settingsBtn.addEventListener('click', () => {
                    // Show account settings section
                    const settingsSection = document.getElementById('account-settings-section');
                    if (settingsSection) {
                        settingsSection.scrollIntoView({ behavior: 'smooth' });
                    }
                });
            }
        });
    </script>
</body>
</html>
