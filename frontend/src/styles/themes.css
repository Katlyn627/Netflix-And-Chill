/**
 * Theme and Background Styles
 * Comprehensive styling for all theme variations and background options
 */

/* Reusable SVG noise patterns as CSS custom properties */
:root {
    --noise-pattern-fine: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="300" height="300"><filter id="noise"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="4" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23noise)" opacity="0.05"/></svg>');
    --noise-pattern-medium: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><filter id="noise"><feTurbulence type="fractalNoise" baseFrequency="0.7" numOctaves="3"/></filter><rect width="100%" height="100%" filter="url(%23noise)" opacity="0.03"/></svg>');
}

/* ========================================
   THEME VARIATIONS
   ======================================== */

/* Cinematic Red Theme (Default) */
body.theme-cinematic-red {
    --color-primary: #E50914;
    --color-secondary: #831010;
    --color-background: #141414;
    --color-background-alt: #000000;
    --color-text: #ffffff;
    --color-text-muted: #b3b3b3;
    background: linear-gradient(135deg, var(--color-background) 0%, var(--color-background-alt) 100%);
}

/* Noir Theme */
body.theme-noir {
    --color-primary: #c0c0c0;
    --color-secondary: #808080;
    --color-background: #0a0a0a;
    --color-background-alt: #1a1a1a;
    --color-text: #e5e5e5;
    --color-text-muted: #999999;
    background: linear-gradient(135deg, var(--color-background) 0%, var(--color-background-alt) 100%);
}

/* Warm Cinema Theme */
body.theme-warm-cinema {
    --color-primary: #d4a574;
    --color-secondary: #8b6f47;
    --color-background: #2b2419;
    --color-background-alt: #3d3226;
    --color-text: #f5efe7;
    --color-text-muted: #c9b99c;
    background: linear-gradient(135deg, var(--color-background) 0%, var(--color-background-alt) 100%);
}

/* Minimal Monochrome Theme */
body.theme-minimal-monochrome {
    --color-primary: #000000;
    --color-secondary: #333333;
    --color-background: #ffffff;
    --color-background-alt: #f5f5f5;
    --color-text: #000000;
    --color-text-muted: #666666;
    background: linear-gradient(135deg, var(--color-background) 0%, var(--color-background-alt) 100%);
}

/* ========================================
   CONTRAST MODES
   ======================================== */

body.contrast-high {
    --contrast-multiplier: 1.5;
    filter: contrast(1.2);
}

body.contrast-high .card,
body.contrast-high button,
body.contrast-high input,
body.contrast-high select {
    border: 2px solid var(--color-text);
}

body.contrast-soft {
    --contrast-multiplier: 0.8;
    filter: contrast(0.85);
}

/* ========================================
   MOTION LEVELS
   ======================================== */

body.motion-full {
    --animation-duration: 0.3s;
}

body.motion-reduced * {
    animation-duration: 0.01s !important;
    transition-duration: 0.01s !important;
}

body.motion-static * {
    animation: none !important;
    transition: none !important;
}

/* ========================================
   BACKGROUND STYLES - HOME/FEED PAGE
   ======================================== */

/* Film Grain Texture */
body.bg-home-film-grain::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: var(--noise-pattern-fine);
    pointer-events: none;
    z-index: 1;
    opacity: 0.1;
}

/* Theater Seats */
body.bg-home-theater-seats {
    background-image: 
        linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.9)),
        url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100"><rect fill="%23300" width="100" height="100"/></svg>');
    background-size: cover;
    background-attachment: fixed;
}

body.bg-home-theater-seats::after {
    content: '';
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    height: 30%;
    background: linear-gradient(to top, rgba(50, 0, 0, 0.3), transparent);
    pointer-events: none;
    z-index: 1;
}

/* Velvet Curtain */
body.bg-home-velvet-curtain {
    background: linear-gradient(135deg, 
        #4a0000 0%, 
        #8b0000 25%, 
        #660000 50%, 
        #4a0000 75%, 
        #330000 100%);
    background-size: 200% 200%;
}

body.bg-home-velvet-curtain::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(ellipse at center, transparent 0%, rgba(0,0,0,0.4) 100%);
    pointer-events: none;
    z-index: 1;
}

/* Matte Black with Vignette */
body.bg-home-matte-black {
    background: #000000;
}

body.bg-home-matte-black::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(ellipse at center, 
        rgba(229, 9, 20, 0.1) 0%, 
        rgba(0, 0, 0, 0.5) 50%, 
        rgba(0, 0, 0, 0.9) 100%);
    pointer-events: none;
    z-index: 1;
}

/* Rotating Gradients */
body.bg-home-rotating-gradients {
    background: linear-gradient(45deg, #141414, #4a0000, #141414, #003366);
    background-size: 400% 400%;
    animation: gradientRotate 20s ease infinite;
}

@keyframes gradientRotate {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

/* ========================================
   BACKGROUND STYLES - PROFILE PAGE
   ======================================== */

/* Spotlight Fade */
body.bg-profile-spotlight-fade {
    background: radial-gradient(ellipse at center, 
        rgba(229, 9, 20, 0.15) 0%, 
        #141414 40%, 
        #000000 100%);
}

/* Film Strip Borders */
body.bg-profile-film-strip {
    background: linear-gradient(135deg, #141414 0%, #000000 100%);
    border-left: 20px solid transparent;
    border-right: 20px solid transparent;
    border-image: repeating-linear-gradient(
        0deg,
        #333 0px,
        #333 10px,
        transparent 10px,
        transparent 20px
    ) 20;
}

/* Spotlight Halo */
body.bg-profile-spotlight-halo::before {
    content: '';
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 600px;
    height: 600px;
    background: radial-gradient(circle, 
        rgba(229, 9, 20, 0.2) 0%, 
        transparent 70%);
    pointer-events: none;
    z-index: 1;
}

/* Minimal Matte */
body.bg-profile-minimal-matte {
    background: #1a1a1a;
}

/* Poster Style */
body.bg-profile-poster-style {
    background: 
        linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.9)),
        linear-gradient(135deg, #2d1f1f 0%, #1a0f0f 100%);
}

body.bg-profile-poster-style::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 15px solid rgba(229, 9, 20, 0.2);
    box-shadow: inset 0 0 40px rgba(0, 0, 0, 0.8);
    pointer-events: none;
    z-index: 1;
}

/* ========================================
   BACKGROUND STYLES - CHAT PAGE
   ======================================== */

/* Dark Blur */
body.bg-chat-dark-blur {
    background: rgba(10, 10, 10, 0.95);
    backdrop-filter: blur(10px);
}

/* Soft Gradient */
body.bg-chat-soft-gradient {
    background: linear-gradient(180deg, 
        #1a1a1a 0%, 
        #0d0d0d 50%, 
        #1a1a1a 100%);
}

/* Aisle Bokeh */
body.bg-chat-aisle-bokeh {
    background: #0a0a0a;
}

body.bg-chat-aisle-bokeh::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: radial-gradient(circle, rgba(229, 9, 20, 0.1) 2px, transparent 2px);
    background-size: 100px 100px;
    opacity: 0.3;
    pointer-events: none;
    z-index: 1;
}

/* Solid Color */
body.bg-chat-solid-color {
    background: #141414;
}

/* ========================================
   BACKGROUND STYLES - WATCH TOGETHER PAGE
   ======================================== */

/* Theater Dim */
body.bg-watchTogether-theater-dim {
    background: linear-gradient(180deg, 
        #0a0a0a 0%, 
        #000000 50%, 
        #0a0a0a 100%);
}

/* Projection Glow */
body.bg-watchTogether-projection-glow {
    background: #000000;
}

body.bg-watchTogether-projection-glow::before {
    content: '';
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 80%;
    height: 60%;
    background: radial-gradient(ellipse, 
        rgba(229, 9, 20, 0.1) 0%, 
        transparent 60%);
    pointer-events: none;
    z-index: 1;
}

/* Letterbox */
body.bg-watchTogether-letterbox::before,
body.bg-watchTogether-letterbox::after {
    content: '';
    position: fixed;
    left: 0;
    width: 100%;
    height: 10%;
    background: #000000;
    z-index: 1;
    pointer-events: none;
}

body.bg-watchTogether-letterbox::before {
    top: 0;
}

body.bg-watchTogether-letterbox::after {
    bottom: 0;
}

/* Popcorn Grain */
body.bg-watchTogether-popcorn-grain {
    background: #0d0d0d;
}

body.bg-watchTogether-popcorn-grain::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: var(--noise-pattern-medium);
    opacity: 0.5;
    pointer-events: none;
    z-index: 1;
}

/* ========================================
   EMOTIONAL TONES
   ======================================== */

body.tone-cozy {
    --tone-warmth: 1.1;
    filter: sepia(0.1) saturate(1.1);
}

body.tone-romantic {
    --tone-warmth: 1.2;
    filter: sepia(0.15) saturate(1.15) hue-rotate(-10deg);
}

body.tone-playful {
    --tone-saturation: 1.2;
    filter: saturate(1.2) brightness(1.05);
}

body.tone-dramatic {
    --tone-contrast: 1.15;
    filter: contrast(1.15) saturate(0.9);
}

body.tone-minimal {
    --tone-saturation: 0.8;
    filter: saturate(0.8);
}

/* ========================================
   ACCESSIBILITY & COMFORT
   ======================================== */

/* Eye Strain Reduction */
body.eye-strain-reduction {
    filter: brightness(0.9) contrast(0.9);
}

body.eye-strain-reduction * {
    text-shadow: none !important;
}

/* Reduced Red Saturation */
body.reduced-red-saturation {
    --color-primary: #cc4444;
}

body.reduced-red-saturation * {
    filter: hue-rotate(5deg) saturate(0.7);
}

/* Font & Background Spacing */
body.spacing-compact {
    --spacing-multiplier: 0.8;
}

body.spacing-compact .card,
body.spacing-compact section {
    padding: calc(var(--spacing-multiplier) * 20px);
}

body.spacing-comfortable {
    --spacing-multiplier: 1.2;
}

body.spacing-comfortable .card,
body.spacing-comfortable section {
    padding: calc(var(--spacing-multiplier) * 30px);
    line-height: 1.8;
}

body.spacing-spacious {
    --spacing-multiplier: 1.5;
}

body.spacing-spacious .card,
body.spacing-spacious section {
    padding: calc(var(--spacing-multiplier) * 35px);
    line-height: 2;
}

body.spacing-spacious * {
    letter-spacing: 0.5px;
}

/* Focus Mode */
body.focus-mode {
    background: #1a1a1a !important;
    filter: none !important;
}

body.focus-mode::before,
body.focus-mode::after {
    display: none !important;
}

body.focus-mode * {
    animation: none !important;
    transition: opacity 0.1s, transform 0.1s !important;
}

body.focus-mode .card {
    background: #2a2a2a !important;
    box-shadow: none !important;
}

/* ========================================
   DYNAMIC RESPONSES
   ======================================== */

/* Match Warmth Effect */
body.match-warmth-active {
    animation: warmGlow 2s ease-in-out;
}

@keyframes warmGlow {
    0%, 100% { filter: none; }
    50% { filter: sepia(0.3) saturate(1.3); }
}

/* Message Pulse Effect */
body.message-pulse-active {
    animation: messagePulse 0.5s ease-out;
}

@keyframes messagePulse {
    0% { opacity: 1; }
    50% { opacity: 0.95; }
    100% { opacity: 1; }
}

/* Typing Dim Effect */
body.typing-active {
    filter: brightness(0.95);
    transition: filter 0.3s;
}

/* Session Spotlight Effect */
body.session-spotlight-active::before {
    opacity: 1 !important;
    transition: opacity 0.5s;
}

/* ========================================
   TIME-BASED CHANGES
   ======================================== */

body.time-evening {
    filter: brightness(0.9) sepia(0.05);
}

body.time-morning {
    filter: brightness(1.05);
}

/* ========================================
   PERFORMANCE OPTIMIZATIONS
   ======================================== */

body.static-background-fallback::before,
body.static-background-fallback::after {
    display: none;
}

body.static-background-fallback {
    background: var(--color-background) !important;
}

/* ========================================
   CONTENT Z-INDEX MANAGEMENT
   ======================================== */

.container,
main,
.card,
header,
footer {
    position: relative;
    z-index: 2;
}

/* ========================================
   RESPONSIVE ADJUSTMENTS
   ======================================== */

@media (max-width: 768px) {
    body.bg-profile-film-strip {
        border-left-width: 10px;
        border-right-width: 10px;
    }
    
    body.bg-watchTogether-letterbox::before,
    body.bg-watchTogether-letterbox::after {
        height: 5%;
    }
}

/* ========================================
   PRINT STYLES
   ======================================== */

@media print {
    body::before,
    body::after {
        display: none !important;
    }
    
    body {
        background: white !important;
        color: black !important;
        filter: none !important;
    }
}
